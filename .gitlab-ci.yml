image: gitlab-registry.irstea.fr/francois.colleoni/smash:latest

cache:
  paths:
    - smash
  
stages:
  - build-tap
  - build-code
  - build-doc
  - test
  
build-tap:
  stage: build-tap
  script:
    - make tap

build-code:
  stage: build-code
  script: 
    - make

build-doc:
  stage: build-doc
  script:
    - make library
    - cd doc
    - make html

test:
  stage: test
  script:
    - make library
    - make test
